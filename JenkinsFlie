pipeline {
    agent any
     options {
        // This is required if you want to clean before build
        skipDefaultCheckout(true)
        // Clean before build
                cleanWs()
                // We need to explicitly checkout from SCM here
                checkout scm
    }
    tools
    {
    maven "MAVEN_HOME"
    }
    stages{
        stage('Run Tests') {
            parallel {

         stage("test1"){
            steps
            {
                git "https://github.com/mohamedtarekali/usingShaftEngine.git"
                bat "mvn -Dmaven.test.failure.ignore=true clean package -f ShaftEnginProject/pom.xml"
            }
           }
         stage("test2"){
            steps
            {
                sleep 30
                
                git "https://github.com/mohamedtarekali/usingShaftEngine.git"
                bat "mvn test -DbrowserStack.deviceName=\"Samsung Galaxy S21\" -Dmaven.test.failure.ignore=true clean package -f ShaftEnginProject/pom.xml"
            }
           }
         
            }
        }
          
    }
}
